File_New
!                 Starting Fresh - Clear Workspace
;

Create_Hybrid_Model
!                            Create a Hybrid model.
!                            Ask for the Caliibration File to use...
! /CALIBRATION_FILE=
;

Remove_Prefix_From_Point_Labels
! Enter Subject Name (ie. "K001:") 2x in this pipeline

/PREFIX=
/INCLUDE_CAL_FILE=TRUE
! /OVERWRITE_C3D_FILE=FALSE
;

Open_Model_File
!                       Load the Model Template (Segment Definitions) HIP_TORSO_2016.mdh
! /FILE_NAME=
! /CALIBRATION_FILE=
;

Set_Subject_Weight
!         Ask for weight and Height
!         After this, any subject specific info should be changed...
!
! /CALIBRATION_FILE=
! /WEIGHT=
;

Set_Subject_Height
! /CALIBRATION_FILE=
! /HEIGHT=
;

Switch_to_Model_Builder_Mode
;

Open_File
!      Ask for the Movement data files.
!      Multiple files can be selected in the dialog file listing  using CTRL-Click
! /FILE_NAME=
;

Associate_Functional_Joints_With_Files
! /CALIBRATION_FILE=
/FILE_NAME=*FHIPR*
/LANDMARKS=RHIP
/START_FRAME=1
/END_FRAME=EOF
! /COMPUTE_LANDMARK=FALSE
;

Associate_Functional_Joints_With_Files
! /CALIBRATION_FILE=
/FILE_NAME=*FHIPL*
/LANDMARKS=LHIP
/START_FRAME=1
/END_FRAME=EOF
! /COMPUTE_LANDMARK=FALSE
;

Select_Active_File
/FILE_NAME=ALL_FILES
! /QUERY=
;

Remove_Prefix_From_Point_Labels
! Enter Subject Name (ie. "K001:")

/PREFIX=
! /INCLUDE_CAL_FILE=TRUE
! /OVERWRITE_C3D_FILE=FALSE
;

Switch_to_FJ_PostProcessing_Tab
 /MODE=1
;

Pipeline_Breakpoint
 /PAUSE_MESSAGE=Process Functional Hip joints
;

Set_Model_Metric
!
!Calculates the pelvis depth from the L5S1 marker to the IC markers in the x direction, accounting for the marker radius and platform height
!
! /CALIBRATION_FILE=
/METRIC_NAME=PELVIS_DEPTH
 /METRIC_VALUE=L5S1::X-((RIC::X+LIC::X)/2)-0.0095
;

Set_Model_Metric
!
!Calculates the Left Leg Lenth from the LASIS and L lat ankle markers in the z direction
!
! /CALIBRATION_FILE=
/METRIC_NAME=LeftLegLength
 /METRIC_VALUE=LASIS::Z-L_LAANKLE::Z
;

Set_Model_Metric
!
!Calculates the Right Leg Lenth from the RASIS and R lat ankle markers in the z direction

! /CALIBRATION_FILE=
/METRIC_NAME=RightLegLength
 /METRIC_VALUE=RASIS::Z-R_LAANKLE::Z
;

Build_Model
! /CALIBRATION_FILE=
! /REBUILD_ALL_MODELS=FALSE
! /DISPLAY_RESULTS=TRUE
;

Assign_Model_File
!      Assing the Movement files to the model
!      Just bring up the dialog box...
! /CALIBRATION_FILE=
! /MOTION_FILE_NAMES=
;

! select all the motion files that you want to open

Select_Active_File
/FILE_NAME=ALL_FILES
;

!stores the left leg length as a global metric so that it can be exported

Evaluate_Expression
/EXPRESSION=MODEL::METRIC::LeftLegLength
/RESULT_NAME=GLOBAL::LeftLegLength
/RESULT_TYPE=METRIC
/RESULT_FOLDER=PROCESSED
;

!stores the right leg length as a global metric so that it can be exported

Evaluate_Expression
/EXPRESSION=MODEL::METRIC::RightLegLength
/RESULT_NAME=GLOBAL::RightLegLength
/RESULT_TYPE=METRIC
/RESULT_FOLDER=PROCESSED
;

! Removes extra signals that are not needed to keep the files smaller

Remove_Signals
/SIGNAL_TYPES=ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG
/SIGNAL_NAMES=door+EMG_1+EMG_10+EMG_11+EMG_12+EMG_13+EMG_14+EMG_15+EMG_16+EMG_2+EMG_3+EMG_4+EMG_5+EMG_6+EMG_7+EMG_8+EMG_9+mirror+Pin 1+Pin 10+Pin 11+Pin 12+Pin 13+Pin 14+Pin 15+Pin 2+Pin 3+Pin 4+Pin 5+Pin 6
/SIGNAL_FOLDER=ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL
;

Remove_Signals
/SIGNAL_TYPES=ANALOG+ANALOG+ANALOG+ANALOG+ANALOG+ANALOG
/SIGNAL_NAMES=Pin 28+Pin 29+Pin 30+Pin 31+Pin 32+Pin 33
/SIGNAL_FOLDER=ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL+ORIGINAL
! /INCLUDE_MODELS=FALSE
;

! calculated the product of heigh and body mass

Multiply_Signals
/SIGNAL_TYPES=METRIC+METRIC
/SIGNAL_NAMES=HEIGHT+MASS
/SIGNAL_FOLDER=PROCESSED
/RESULT_NAME=Mass*Height
! /RESULT_FOLDER=PROCESSED
;

!calculates the product of bodymass, height and g to obtain Bw*Ht metric to which all moments can be normalized

Multiply_Signals_By_Constant
/SIGNAL_TYPES=METRIC
/SIGNAL_NAMES=Mass*Height
/SIGNAL_FOLDER=PROCESSED
/RESULT_NAMES=BW*Ht
! /RESULT_TYPES=
! /RESULT_FOLDER=PROCESSED
! /RESULT_SUFFIX=
! /SIGNAL_COMPONENTS=
/CONSTANT=9.81
;

! Low pass filters the marker data at 6 hz

Lowpass_Filter
/SIGNAL_TYPES=TARGET
! /SIGNAL_NAMES=
! /SIGNAL_FOLDER=ORIGINAL
! /RESULT_SUFFIX=
! /RESULT_FOLDER=PROCESSED
! /FILTER_CLASS=BUTTERWORTH
/FREQUENCY_CUTOFF=6
/NUM_REFLECTED=200
/TOTAL_BUFFER_SIZE=200
! /NUM_BIDIRECTIONAL_PASSES=1
;

! Low pass filters the force plate data at 50 hz

Lowpass_Filter
/SIGNAL_TYPES=ANALOG
! /SIGNAL_NAMES=
! /SIGNAL_FOLDER=ORIGINAL
! /RESULT_SUFFIX=
! /RESULT_FOLDER=PROCESSED
! /FILTER_CLASS=BUTTERWORTH
/FREQUENCY_CUTOFF=50
/NUM_REFLECTED=200
/TOTAL_BUFFER_SIZE=200
! /NUM_BIDIRECTIONAL_PASSES=1
;

! Clears any previosly calculated kinematic/kinetic signals

Remove_Signals
/SIGNAL_TYPES=LINK_MODEL_BASED
! /SIGNAL_NAMES=
! /SIGNAL_FOLDER=ORIGINAL
;

Platform_Corners_From_Jig
/JIG_NAME=FP3_Jig2
/FP_SELECTED=3
/SIGNAL_TYPES=TARGET
! /SIGNAL_FOLDER=ORIGINAL
/SIGNAL_NAMES=FP3jig:corner1+FP3jig:corner2+FP3jig:middle
/X='-0.208514','-0.205635','-0.074452'
/Y='0.267781','-0.259729','-0.260847'
/Z='0.021822','0.017158','0.022968'
/USE_FP_DIMENSIONS=FALSE
! /FP_WIDTH=
! /FP_LENGTH=
! /UPDATE_C3D_CORNERS=TRUE
;

! Sets a flag that causes Visual3D to use the PROCESSED ANALOG signals for computing the Ground Reaction Force and External Force signals.

Set_Use_Processed_Analog
/USE_PROCESSED=TRUE
;

! Sets a flag that causes Visual3D to use the signals in the TARGET PROCESSED folder for computing Kinetics and Kinematics.

Set_Use_Processed_Targets
/USE_PROCESSED=TRUE
;

Recalc
!   Recalc is needed to re-do the signal and metrics processing only in case someone fussed with it,
!                  kind of resetting the playing field...
;

! Calculate the trunk angle wrt the lab for the SLS task if the subject is facing towards the screen

Compute_Model_Based_Data
/RESULT_NAME=Trunk_Wrt_VirtualLab
/FUNCTION=JOINT_ANGLE
/SEGMENT=RPV
/REFERENCE_SEGMENT=Virtual_Lab_Pelvis
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
! /NORMALIZATION_METHOD=
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

!  Torso kinematics wrt to lab. Used for walking (away from screen) and for stairs up.

Compute_Model_Based_Data
/RESULT_NAME=TRUNK_ANGLE_LAB
/FUNCTION=JOINT_ANGLE
/SEGMENT=RTA
! /REFERENCE_SEGMENT=LAB
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
! /NORMALIZATION_METHOD=
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

! Calculate the pelvis angle for the Dropjump, Deepsquate, STS tasks if the subject is facing away from the windows

Compute_Model_Based_Data
/RESULT_NAME=Pelvis_Wrt_VirtualLab_DJDS
/FUNCTION=JOINT_ANGLE
/SEGMENT=RPV
/REFERENCE_SEGMENT=Virtual_Lab_Pelvis_DJDS
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
! /NORMALIZATION_METHOD=
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
/AXIS1=Z
! /AXIS2=Y
/AXIS3=X
;

!Calculates the pelvis angle wrt to the virtual lab that changes direction. Works for freewalk, fixedwalk, stairs up and stairs down ONLY

Compute_Model_Based_Data
/RESULT_NAME=Pelvis_Wrt_VirtualLab
/FUNCTION=JOINT_ANGLE
/SEGMENT=RPV
/REFERENCE_SEGMENT=Virtual_Lab_Pelvis
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
! /NORMALIZATION_METHOD=
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
/AXIS1=Z
! /AXIS2=Y
/AXIS3=X
;

Compute_Model_Based_Data
/RESULT_NAME=PELVIS_ANGLE
/FUNCTION=JOINT_ANGLE
/SEGMENT=RPV
! /REFERENCE_SEGMENT=LAB
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
! /NORMALIZATION_METHOD=
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
/AXIS1=Z
! /AXIS2=Y
/AXIS3=X
;

Compute_Model_Based_Data
/RESULT_NAME=LeftAnkleAngle
/FUNCTION=JOINT_ANGLE
/SEGMENT=L Vertical Foot
/REFERENCE_SEGMENT=LSK
! /RESOLUTION_COORDINATE_SYSTEM=LAB
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
! /NORMALIZATION_METHOD=
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
/NEGATEY=TRUE
/NEGATEZ=TRUE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=LeftAnkleMoment
/FUNCTION=JOINT_MOMENT
/SEGMENT=LFT
! /REFERENCE_SEGMENT=LAB
/RESOLUTION_COORDINATE_SYSTEM=LSK
! /USE_CARDAN_SEQUENCE=FALSE
/NORMALIZATION=TRUE
/NORMALIZATION_METHOD=NORMALIZE_TO_LOCAL_METRIC
/NORMALIZATION_METRIC=BW*HT
! /NEGATEX=FALSE
/NEGATEY=TRUE
/NEGATEZ=TRUE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=LeftKneeAngle
/FUNCTION=JOINT_ANGLE
/SEGMENT=LSK
/REFERENCE_SEGMENT=LTH
! /RESOLUTION_COORDINATE_SYSTEM=LAB
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
! /NORMALIZATION_METHOD=
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
/NEGATEY=TRUE
/NEGATEZ=TRUE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=LeftKneeMoment
/FUNCTION=JOINT_MOMENT
/SEGMENT=LSK
! /REFERENCE_SEGMENT=LAB
/RESOLUTION_COORDINATE_SYSTEM=LTH
! /USE_CARDAN_SEQUENCE=FALSE
/NORMALIZATION=TRUE
/NORMALIZATION_METHOD=NORMALIZE_TO_LOCAL_METRIC
/NORMALIZATION_METRIC=BW*HT
! /NEGATEX=FALSE
/NEGATEY=TRUE
/NEGATEZ=TRUE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=LeftHipAngle
/FUNCTION=JOINT_ANGLE
/SEGMENT=LTH
/REFERENCE_SEGMENT=RPV
! /RESOLUTION_COORDINATE_SYSTEM=LAB
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
! /NORMALIZATION_METHOD=
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
/NEGATEY=TRUE
/NEGATEZ=TRUE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=LeftHipMoment
/FUNCTION=JOINT_MOMENT
/SEGMENT=LTH
! /REFERENCE_SEGMENT=LAB
/RESOLUTION_COORDINATE_SYSTEM=RPV
! /USE_CARDAN_SEQUENCE=FALSE
/NORMALIZATION=TRUE
/NORMALIZATION_METHOD=NORMALIZE_TO_LOCAL_METRIC
/NORMALIZATION_METRIC=BW*HT
! /NEGATEX=FALSE
/NEGATEY=TRUE
/NEGATEZ=TRUE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=RightAnkleAngle
/FUNCTION=JOINT_ANGLE
/SEGMENT=R Vertical Foot
/REFERENCE_SEGMENT=RSK
! /RESOLUTION_COORDINATE_SYSTEM=LAB
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
! /NORMALIZATION_METHOD=
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=RightAnkleMoment
/FUNCTION=JOINT_MOMENT
/SEGMENT=RFT
! /REFERENCE_SEGMENT=LAB
/RESOLUTION_COORDINATE_SYSTEM=RSK
! /USE_CARDAN_SEQUENCE=FALSE
/NORMALIZATION=TRUE
/NORMALIZATION_METHOD=NORMALIZE_TO_LOCAL_METRIC
/NORMALIZATION_METRIC=BW*HT
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=RightKneeAngle
/FUNCTION=JOINT_ANGLE
/SEGMENT=RSK
/REFERENCE_SEGMENT=RTH
! /RESOLUTION_COORDINATE_SYSTEM=LAB
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
! /NORMALIZATION_METHOD=
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=RightKneeMoment
/FUNCTION=JOINT_MOMENT
/SEGMENT=RSK
! /REFERENCE_SEGMENT=LAB
/RESOLUTION_COORDINATE_SYSTEM=RTH
! /USE_CARDAN_SEQUENCE=FALSE
/NORMALIZATION=TRUE
/NORMALIZATION_METHOD=NORMALIZE_TO_LOCAL_METRIC
/NORMALIZATION_METRIC=BW*HT
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=RightHipAngle
/FUNCTION=JOINT_ANGLE
/SEGMENT=RTH
/REFERENCE_SEGMENT=RPV
! /RESOLUTION_COORDINATE_SYSTEM=LAB
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
! /NORMALIZATION_METHOD=
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=RightHipMoment
/FUNCTION=JOINT_MOMENT
/SEGMENT=RTH
! /REFERENCE_SEGMENT=LAB
/RESOLUTION_COORDINATE_SYSTEM=RPV
! /USE_CARDAN_SEQUENCE=FALSE
/NORMALIZATION=TRUE
/NORMALIZATION_METHOD=NORMALIZE_TO_LOCAL_METRIC
/NORMALIZATION_METRIC=BW*HT
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=RightHipPowerScalar
/FUNCTION=JOINT_POWER_SCALAR
/SEGMENT=RTH
/REFERENCE_SEGMENT=
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
/NORMALIZATION=TRUE
/NORMALIZATION_METHOD=DEFAULT_NORMALIZATION
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=LeftHipPowerScalar
/FUNCTION=JOINT_POWER_SCALAR
/SEGMENT=LTH
/REFERENCE_SEGMENT=
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
/NORMALIZATION=TRUE
/NORMALIZATION_METHOD=DEFAULT_NORMALIZATION
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=RightHipPower
/FUNCTION=JOINT_POWER
/SEGMENT=RTH
/REFERENCE_SEGMENT=
/RESOLUTION_COORDINATE_SYSTEM=RPV
! /USE_CARDAN_SEQUENCE=FALSE
/NORMALIZATION=TRUE
/NORMALIZATION_METHOD=DEFAULT_NORMALIZATION
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=LeftHipPower
/FUNCTION=JOINT_POWER
/SEGMENT=LTH
/REFERENCE_SEGMENT=
/RESOLUTION_COORDINATE_SYSTEM=RPV
! /USE_CARDAN_SEQUENCE=FALSE
/NORMALIZATION=TRUE
/NORMALIZATION_METHOD=DEFAULT_NORMALIZATION
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
/NEGATEY=TRUE
/NEGATEZ=TRUE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Compute_Model_Based_Data
/RESULT_NAME=TRUNK_PELVIS_ANGLE
/FUNCTION=JOINT_ANGLE
/SEGMENT=RTA
/REFERENCE_SEGMENT=RPV
/RESOLUTION_COORDINATE_SYSTEM=
! /USE_CARDAN_SEQUENCE=FALSE
! /NORMALIZATION=FALSE
! /NORMALIZATION_METHOD=
! /NORMALIZATION_METRIC=
! /NEGATEX=FALSE
! /NEGATEY=FALSE
! /NEGATEZ=FALSE
! /AXIS1=X
! /AXIS2=Y
! /AXIS3=Z
;

Assign_Tags_To_Files
! /MOTION_FILE_NAMES=
/TAGS=Right_Stair_Up
;

Assign_Tags_To_Files
! /MOTION_FILE_NAMES=
/TAGS=Left_Stair_Up
;

Assign_Tags_To_Files
! /MOTION_FILE_NAMES=
/TAGS=Right_Stair_Down
;

Assign_Tags_To_Files
! /MOTION_FILE_NAMES=
/TAGS=Left_Stair_Down
;

Assign_Tags_To_Files
! /MOTION_FILE_NAMES=
/TAGS=Right_Fixedwalk
;

Assign_Tags_To_Files
! /MOTION_FILE_NAMES=
/TAGS=Left_Fixedwalk
;

Assign_Tags_To_Files
/MOTION_FILE_NAMES=*DJ*.c3d
/TAGS=Drop_Jump
;

Assign_Tags_To_Files
/MOTION_FILE_NAMES=*S2S*.c3d
/TAGS=Sit_to_Stand
;

Combine_Tags
/ORIGINAL_TAGS=Left_Fixedwalk+Right_Fixedwalk
/LOGICAL_OPERATORS=OR
/NEW_TAG=ALL_Fixedwalk
;

Combine_Tags
/ORIGINAL_TAGS=Left_Stair_Up+Right_Stair_Up
/LOGICAL_OPERATORS=OR
/NEW_TAG=Up
;

Combine_Tags
/ORIGINAL_TAGS=Left_Stair_Down+Right_Stair_Down
/LOGICAL_OPERATORS=OR
/NEW_TAG=Down
;

Combine_Tags
/ORIGINAL_TAGS=Up+Down
/LOGICAL_OPERATORS=OR
/NEW_TAG=Stair
;

Combine_Tags
/ORIGINAL_TAGS=Right_Stair_Up+Right_Stair_Down
/LOGICAL_OPERATORS=OR
/NEW_TAG=Right_Stair
;

Combine_Tags
/ORIGINAL_TAGS=Left_Stair_Up+Left_Stair_Down
/LOGICAL_OPERATORS=OR
/NEW_TAG=Left_Stair
;

Select_Active_File
/FILE_NAME=ALL_FILES
! /QUERY=
;

Automatic_Gait_Events
! /SELECT_X=FALSE
! /SELECT_Y=FALSE
! /SELECT_Z=TRUE
! /FRAME_WINDOW=8
! /USE_TPR=TRUE
;

Select_Active_File
/FILE_NAME=DropJump
;

Event_Threshold
/SIGNAL_TYPES=FORCE
/SIGNAL_NAMES=FP1
! /SIGNAL_FOLDER=ORIGINAL
/EVENT_NAME=RON
! /SELECT_X=FALSE
! /SELECT_Y=FALSE
/SELECT_Z=TRUE
! /SELECT_RESIDUAL=FALSE
/THRESHOLD=20
! /FRAME_WINDOW=8
! /FRAME_OFFSET=0
/ASCENDING=TRUE
! /DESCENDING=FALSE
! /ENSURE_RANGE_FRAMES_BEFORE_THRESHOLD_CROSSING=FALSE
! /ENSURE_RANGE_FRAMES_AFTER_THRESHOLD_CROSSING=FALSE
! /START_AT_EVENT=
! /END_AT_EVENT=
/EVENT_INSTANCE=1
;

Event_Threshold
/SIGNAL_TYPES=FORCE
/SIGNAL_NAMES=FP1
! /SIGNAL_FOLDER=ORIGINAL
/EVENT_NAME=ROFF
! /SELECT_X=FALSE
! /SELECT_Y=FALSE
/SELECT_Z=TRUE
! /SELECT_RESIDUAL=FALSE
/THRESHOLD=20
! /FRAME_WINDOW=8
! /FRAME_OFFSET=0
! /ASCENDING=FALSE
/DESCENDING=TRUE
! /ENSURE_RANGE_FRAMES_BEFORE_THRESHOLD_CROSSING=FALSE
! /ENSURE_RANGE_FRAMES_AFTER_THRESHOLD_CROSSING=FALSE
/START_AT_EVENT=RON
! /END_AT_EVENT=
/EVENT_INSTANCE=1
;

Event_Threshold
/SIGNAL_TYPES=FORCE
/SIGNAL_NAMES=FP2
! /SIGNAL_FOLDER=ORIGINAL
/EVENT_NAME=LON
! /SELECT_X=FALSE
! /SELECT_Y=FALSE
/SELECT_Z=TRUE
! /SELECT_RESIDUAL=FALSE
/THRESHOLD=20
! /FRAME_WINDOW=8
! /FRAME_OFFSET=0
/ASCENDING=TRUE
! /DESCENDING=FALSE
! /ENSURE_RANGE_FRAMES_BEFORE_THRESHOLD_CROSSING=FALSE
! /ENSURE_RANGE_FRAMES_AFTER_THRESHOLD_CROSSING=FALSE
! /START_AT_EVENT=
! /END_AT_EVENT=
/EVENT_INSTANCE=1
;

Event_Threshold
/SIGNAL_TYPES=FORCE
/SIGNAL_NAMES=FP2
! /SIGNAL_FOLDER=ORIGINAL
/EVENT_NAME=LOFF
! /SELECT_X=FALSE
! /SELECT_Y=FALSE
/SELECT_Z=TRUE
! /SELECT_RESIDUAL=FALSE
/THRESHOLD=20
! /FRAME_WINDOW=8
! /FRAME_OFFSET=0
! /ASCENDING=FALSE
/DESCENDING=TRUE
! /ENSURE_RANGE_FRAMES_BEFORE_THRESHOLD_CROSSING=FALSE
! /ENSURE_RANGE_FRAMES_AFTER_THRESHOLD_CROSSING=FALSE
/START_AT_EVENT=LON
! /END_AT_EVENT=
/EVENT_INSTANCE=1
;

Select_Active_File
/FILE_NAME=Left_Fixedwalk
;

Event_Threshold
/SIGNAL_TYPES=FORCE
/SIGNAL_NAMES=FP2
! /SIGNAL_FOLDER=ORIGINAL
/EVENT_NAME=LMSt
/SELECT_X=TRUE
! /SELECT_Y=FALSE
! /SELECT_Z=FALSE
! /SELECT_RESIDUAL=FALSE
/THRESHOLD=0
! /FRAME_WINDOW=8
! /FRAME_OFFSET=0
/ASCENDING=TRUE
! /DESCENDING=FALSE
! /ENSURE_RANGE_FRAMES_BEFORE_THRESHOLD_CROSSING=FALSE
! /ENSURE_RANGE_FRAMES_AFTER_THRESHOLD_CROSSING=FALSE
/START_AT_EVENT=LON
/END_AT_EVENT=LOFF
/EVENT_INSTANCE=1
;

Event_Threshold
/SIGNAL_TYPES=FORCE
/SIGNAL_NAMES=FP1
! /SIGNAL_FOLDER=ORIGINAL
/EVENT_NAME=LMSt
/SELECT_X=TRUE
! /SELECT_Y=FALSE
! /SELECT_Z=FALSE
! /SELECT_RESIDUAL=FALSE
/THRESHOLD=0
! /FRAME_WINDOW=8
! /FRAME_OFFSET=0
/ASCENDING=TRUE
! /DESCENDING=FALSE
! /ENSURE_RANGE_FRAMES_BEFORE_THRESHOLD_CROSSING=FALSE
! /ENSURE_RANGE_FRAMES_AFTER_THRESHOLD_CROSSING=FALSE
/START_AT_EVENT=LON
/END_AT_EVENT=LOFF
/EVENT_INSTANCE=1
;

Select_Active_File
/FILE_NAME=Right_Fixedwalk
;

Event_Threshold
/SIGNAL_TYPES=FORCE
/SIGNAL_NAMES=FP2
! /SIGNAL_FOLDER=ORIGINAL
/EVENT_NAME=RMSt
/SELECT_X=TRUE
! /SELECT_Y=FALSE
! /SELECT_Z=FALSE
! /SELECT_RESIDUAL=FALSE
/THRESHOLD=0
! /FRAME_WINDOW=8
! /FRAME_OFFSET=0
/ASCENDING=TRUE
! /DESCENDING=FALSE
! /ENSURE_RANGE_FRAMES_BEFORE_THRESHOLD_CROSSING=FALSE
! /ENSURE_RANGE_FRAMES_AFTER_THRESHOLD_CROSSING=FALSE
/START_AT_EVENT=RON
/END_AT_EVENT=ROFF
/EVENT_INSTANCE=1
;

Event_Threshold
/SIGNAL_TYPES=FORCE
/SIGNAL_NAMES=FP1
! /SIGNAL_FOLDER=ORIGINAL
/EVENT_NAME=RMSt
/SELECT_X=TRUE
! /SELECT_Y=FALSE
! /SELECT_Z=FALSE
! /SELECT_RESIDUAL=FALSE
/THRESHOLD=0
! /FRAME_WINDOW=8
! /FRAME_OFFSET=0
/ASCENDING=TRUE
! /DESCENDING=FALSE
! /ENSURE_RANGE_FRAMES_BEFORE_THRESHOLD_CROSSING=FALSE
! /ENSURE_RANGE_FRAMES_AFTER_THRESHOLD_CROSSING=FALSE
/START_AT_EVENT=RON
/END_AT_EVENT=ROFF
/EVENT_INSTANCE=1
;

! BEFORE RUNNING THIS, enter the height of the LSSH marker in the threshold for the next 2 steps.

Select_Active_File
/FILE_NAME=DeepSquat
;

Event_Threshold
/RESULT_EVENT_NAME=DS_start
/SIGNAL_TYPES=TARGET
/SIGNAL_NAMES=LASSH
/SIGNAL_FOLDER=PROCESSED
/SIGNAL_COMPONENTS=Z
/FRAME_OFFSET=-25
! /TIME_OFFSET=
! /EVENT_SEQUENCE=
! /EXCLUDE_EVENTS=
! /EVENT_SEQUENCE_INSTANCE=0
! /EVENT_SUBSEQUENCE=
! /SUBSEQUENCE_EXCLUDE_EVENTS=
! /EVENT_SUBSEQUENCE_INSTANCE=0
! /EVENT_INSTANCE=0
! /SELECT_X=
! /SELECT_Y=
! /SELECT_Z=
! /SELECT_RESIDUAL=
! /START_AT_EVENT=
! /END_AT_EVENT=
/THRESHOLD=0.3586
/ON_ASCENT=FALSE
/ON_DESCENT=TRUE
/FRAME_WINDOW=50
/ENSURE_FRAMES_BEFORE=FALSE
/ENSURE_FRAMES_AFTER=FALSE
;

Event_Threshold
/RESULT_EVENT_NAME=DS_stop
/SIGNAL_TYPES=TARGET
/SIGNAL_NAMES=LASSH
/SIGNAL_FOLDER=PROCESSED
/SIGNAL_COMPONENTS=Z
/FRAME_OFFSET=25
! /TIME_OFFSET=
! /EVENT_SEQUENCE=
! /EXCLUDE_EVENTS=
! /EVENT_SEQUENCE_INSTANCE=0
! /EVENT_SUBSEQUENCE=
! /SUBSEQUENCE_EXCLUDE_EVENTS=
! /EVENT_SUBSEQUENCE_INSTANCE=0
! /EVENT_INSTANCE=0
! /SELECT_X=
! /SELECT_Y=
! /SELECT_Z=
! /SELECT_RESIDUAL=
! /START_AT_EVENT=
! /END_AT_EVENT=
/THRESHOLD=0.3586
/ON_ASCENT=TRUE
/ON_DESCENT=FALSE
/FRAME_WINDOW=50
/ENSURE_FRAMES_BEFORE=FALSE
/ENSURE_FRAMES_AFTER=FALSE
;

